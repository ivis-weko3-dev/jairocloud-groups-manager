---
title: services.users
description: 当システムのユーザー管理に関するビジネスロジックを提供する。
---

## get_group_ids_with_eppn
ePPNから所属グループを取得する

#### 引数
| 名前 | 型  | 説明                   |
| ---- | --- | ---------------------- |
| eppn | str | ログインユーザーのePPN |

#### 戻り値
| 型         | 説明         |
| ---------- | ------------ |
| list\[str] | 所属group_id |

#### 処理方法
1. [`get_by_eppn`]でユーザー情報を取得する
2. 戻り値がNoneの場合ResourceNotFoundを送出する
3. [`UserDetail`](../03.entities/10.user-detail.md#userdetail)オブジェクトの場合UserDetail.groupsの各要素のidをリストにして返却する

## get_filter_options
ユーザー一覧のフィルター選択肢を取得する

#### シグネチャ
```python[users.py]
def get_filter_options() -> UserFilterOption:
```

#### 引数
| 名前         | 型  | 説明           |
| ------------ | --- | -------------- |
| is_member_of | str | isMemberOf属性 |

#### 戻り値

| 型               | 説明                           |
| ---------------- | ------------------------------ |
| UserFilterOption | ユーザーのフィルターオプション |

#### 処理方法
1. is_member_ofを引数に[`get_user_roles`](../05.services/08.permission.md#get_user_roles)で管理対象のリポジトリIDを取得
2. services.groups:searchでリポジトリIDを含むグループを検索しIDをリスト化
3. UserFilterOptionを作成し返却する
